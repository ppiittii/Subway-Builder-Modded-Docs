---
id: legacy-map-installation-guide
title: Guida all'Installazione delle Mappe (Legacy)
---

Prima che venisse sviluppato il Map Manager, veniva utilizzato il metodo `serve`. Era più complesso e variava da mappa a mappa, ma possiamo facilmente estrarre i file di cui abbiamo bisogno e portare la mappa nel Map Manager.

### Passaggio 1 - Installazione del Map Manager
Scarica l'ultima versione del Map Manager su https://github.com/Kronifer/subwaybuilder-patcher/releases. Per scaricare, clicca sulla versione che corrisponde al tuo sistema operativo.

<img width="1000" alt="image" src="https://github.com/user-attachments/assets/4bc7b27d-9868-475f-9a4a-5ce447a77036" />

:::note
Per Windows, devi scaricare il file `.exe`. Per Linux, devi scaricare il file `.zip`. Per MacOS, usa il file `arm64.dmg` se il tuo Mac ha un chip Apple Silicon (ad es. M1, M2, M3, ecc.) e il file `x64.dmg` se il tuo Mac ha un chip Intel. In generale, i Mac più recenti (dal 2021 circa in poi) tendono ad avere chip Apple Silicon, mentre i modelli più vecchi tendono ad avere chip Intel, ma verifica perché ci sono eccezioni.
:::

:::note
Su MacOS, è probabile che l'installer `.dmg` sia messo in quarantena. Per eseguire l'installer, apri un terminale nella cartella in cui hai scaricato il file, quindi esegui `xattr -d com.apple.quarantine {INSTALLER_FILENAME}`. Ad esempio, scaricando la versione 0.2.7 per un Mac ARM, dovresti eseguire `xattr -d com.apple.quarantine Subway.Builder.Map.Manager-0.2.7-arm64.dmg`.
:::

Dopo di ciò, installa l'app come faresti normalmente con qualsiasi altra applicazione. Una volta terminata l'installazione, avvia l'app e completa la procedura di configurazione. A questo punto è sicuro eliminare lo ZIP, l'installer e qualsiasi altro file scaricato.

### Passaggio 2 - Estrazione dei File
Ora dobbiamo estrarre i file necessari dalla mappa che hai scaricato. In totale ci serviranno 6 file:
 - `XXX.pmtiles` (`XXX` è il codice della tua città; ad es. `MIA` per Miami)
 - `demand_data.json`
 - `buildings_index.json`
 - `roads.geojson`
 - `runways_taxiways.geojson`
 - `config.json`

Il primo è semplice. Nella mappa scaricata, cerca il file XXX.pmtiles. Si trova da qualche parte nella directory, nella root o all'interno di una cartella. Per ora, crea una cartella di lavoro temporanea dove salvare i nostri 6 file.

I 4 successivi richiedono un po' più di lavoro. Dovresti riuscire a trovarli facilmente, tuttavia sono tutti in formato compresso (terminano con `.gz`). Per questo, dobbiamo estrarli come archivio.

:::tip
Su Windows e Linux, puoi usare [7-Zip](https://www.7-zip.org/download.html) per estrarre l'archivio `.gz`. MacOS supporta nativamente l'estrazione degli archivi gzip, quindi puoi semplicemente cliccare sul file per estrarlo.
:::

All'interno dovresti vedere un singolo file. Se sei nell'archivio `demand_data.json.gz`, dovresti vedere `demand_data.json`, e lo stesso vale per gli altri 3 archivi. Estrai tutti e 4 questi file e inseriscili nella cartella di lavoro temporanea. Alcune mappe hanno file di dati duplicati nella directory. Non importa quale scegli, sono tutti uguali.

L'ultimo file di cui abbiamo bisogno è `config.json`. Questo è il più difficile. Per prima cosa, crea un nuovo file chiamato `config.json`.

:::tip
Assicurati che sia un file `.json`. Cerca su Google come abilitare le estensioni dei nomi file sul tuo sistema operativo se il tipo di file non è indicato come `JSON File`.
:::

All'interno di `config.json`, incolla questo modello:
```
{
  "name": "Boise",
  "code": "BOI",
  "description": "Build a rapid transit network for one of America`s fastest growing cities.",
  "population": 329866,
  "initialViewState": {
    "zoom": 13,
    "latitude": 43.617499,
    "longitude": -116.245394,
    "bearing": 0
  },
  "creator": "muffintime",
  "version": "2.1.0"
}
```


Dobbiamo modificare questi dati affinché corrispondano alla nostra mappa. Nella directory della tua mappa dovrebbe esserci un file `.js`, più comunemente `index.js`. All'interno di quel file vedrai qualcosa di molto simile al nostro modello.

<img width="1097" height="402" alt="image" src="https://github.com/user-attachments/assets/b25a1577-badf-4adf-a414-d76003c3a26d" />

> Questo si trova nel file `index.js` del Canadian Cities Map Pack.

:::tip
Se la tua directory contiene più file `.js`, controllali tutti. Uno di essi contiene i dati di cui hai bisogno.
:::

Da questo file possiamo ottenere:
 - `name`
 - `code`
 - `description`
 - `population`
 - `initialViewState` (e tutti i suoi parametri)

:::note
Se i tuoi dati non includono `initialViewState`, puoi impostare 12 o 13 per `zoom` e 0 per `bearing`. Per `latitude` e `longitude`, puoi scegliere qualsiasi numero all'interno dell'intervallo delle coordinate del tuo bbox (`latitude` corrisponde al **2°** e **4°** numero e `longitude` corrisponde al **1°** e **3°**). Nell'esempio di Toronto mostrato sopra, potremmo usare 44.0 e -79.0 rispettivamente per `latitude` e `longitude`.
:::

Le ultime 2 informazioni necessarie, `creator` e `version`, si trovano entrambe in `manifest.json`, che ogni progetto possiede. Una volta ottenuto tutto ciò che serve per il tuo config.json, assicurati di avere tutti e 6 i file. Dopo di ciò, puoi passare al passaggio successivo.

:::important
Anche se non è obbligatorio, se prevedi di condividere questa mappa convertita, includi il `creator`. Questo garantisce che i creatori originali ricevano il giusto credito per le mappe che hanno realizzato.
:::

### Passaggio 3 - Creazione dello ZIP
Ora che abbiamo tutti e 6 i file, dobbiamo comprimerli in un `.zip`. Può essere fatto facilmente su Windows o Linux nativamente o usando [7-Zip](https://www.7-zip.org/download.html), oppure su MacOS selezionando `Comprimi`. Una volta ottenuto il file `.zip`, hai praticamente finito di convertire la mod e resta solo da importarla nel gioco per giocarla.

### Passaggio 4 - Aggiungere la Mappa

Per installare una mappa, clicca semplicemente sul pulsante `ADD A MAP` e importa il file ZIP contenente la tua mappa. Una volta completato, dovresti vedere il nome della mappa, il creatore e la versione apparire sullo schermo.

<img width="1200" alt="image" src="https://github.com/user-attachments/assets/c258cf39-c211-4677-8ac1-0828a97d5c61" />

Una volta importate tutte le mappe che desideri aggiungere al gioco, clicca sul pulsante `GENERATE MOD`. Questo aggiunge automaticamente le mappe in Subway Builder e registra il Map Manager come mod nel tuo gioco.\

Se desideri aggiungere un'altra mappa dopo aver già generato la mod, riavvia il Map Manager e importa tutte le mappe che vuoi nel gioco (incluse quelle già presenti). Clicca `GENERATE MOD` e il Map Manager aggiungerà automaticamente le mappe in Subway Builder. Se non riaggiungi le mappe precedenti, verranno rimosse dal gioco.

### Passaggio 5 - Avvio di Subway Builder

Dopo aver aggiunto tutte le mappe e generato la mod, puoi avviare il gioco usando `START GAME`. D'ora in poi dovrai avviare il gioco in questo modo. Nel gioco, le tue mappe appariranno nella scheda `CUSTOM` e saranno pronte per essere giocate!

:::important
A causa del funzionamento attuale del gioco, devi avviarlo tramite il Map Manager ogni volta che vuoi giocare una mappa personalizzata. Se non avvii il gioco tramite il Map Manager, edifici e acqua non appariranno nel gioco.
:::
