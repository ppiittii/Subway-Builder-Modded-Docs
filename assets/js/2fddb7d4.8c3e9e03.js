"use strict";(self.webpackChunksubway_builder_modded_docs=self.webpackChunksubway_builder_modded_docs||[]).push([[774],{2951(e,n,i){i.r(n),i.d(n,{assets:()=>d,contentTitle:()=>t,default:()=>h,frontMatter:()=>l,metadata:()=>r,toc:()=>a});const r=JSON.parse('{"id":"debugging","title":"Debugging","description":"Tips for debugging your mods during development.","source":"@site/modding-docs/debugging.mdx","sourceDirName":".","slug":"/debugging","permalink":"/modding-docs/debugging","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"id":"debugging","title":"Debugging"},"sidebar":"docs","previous":{"title":"React Components","permalink":"/modding-docs/react-components"},"next":{"title":"Type Reference","permalink":"/modding-docs/type-reference"}}');var o=i(6070),s=i(1753);const l={id:"debugging",title:"Debugging"},t=void 0,d={},a=[{value:"Hot Reload",id:"hot-reload",level:2},{value:"Console Logging",id:"console-logging",level:2},{value:"Viewing Logs",id:"viewing-logs",level:3},{value:"Error Handling",id:"error-handling",level:2},{value:"Game Error Hooks",id:"game-error-hooks",level:2},{value:"Type Checking",id:"type-checking",level:2},{value:"Common Issues",id:"common-issues",level:2},{value:"&quot;SubwayBuilderAPI Not Found&quot;",id:"subwaybuilderapi-not-found",level:3},{value:"UI Not Showing Up",id:"ui-not-showing-up",level:3},{value:"Changes Not Appearing After Reload",id:"changes-not-appearing-after-reload",level:3},{value:"React Hooks Errors (&quot;Invalid Hook Call&quot;)",id:"react-hooks-errors",level:3},{value:"Windows Symlink Permission Error",id:"windows-symlink-permission-error",level:3}];function c(e){const n={admonition:"admonition",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.p,{children:"Tips for debugging your mods during development."}),"\n",(0,o.jsx)(n.h2,{id:"hot-reload",children:"Hot Reload"}),"\n",(0,o.jsx)(n.p,{children:"The fastest way to test changes is hot reloading. After rebuilding your mod:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["Press ",(0,o.jsx)(n.strong,{children:"Ctrl+Shift+R"})," (Windows/Linux) or ",(0,o.jsx)(n.strong,{children:"Cmd+Shift+R"})," (Mac) in-game"]}),"\n",(0,o.jsxs)(n.li,{children:["This calls ",(0,o.jsx)(n.code,{children:"api.reloadMods()"})," internally, which clears all mod callbacks, UI components, custom\nlayers, and custom train types, then re-executes all mod scripts"]}),"\n"]}),"\n",(0,o.jsxs)(n.p,{children:["If you're using ",(0,o.jsx)(n.code,{children:"pnpm dev"}),", Vite automatically rebuilds on file save, so you just need to press the\nreload shortcut in-game."]}),"\n",(0,o.jsx)(n.admonition,{type:"note",children:(0,o.jsx)(n.p,{children:"Hot reload clears most mod state, but some things persist (like already-built tracks and\nstations). If your mod gets into a weird state, restarting the game fully is the safest reset."})}),"\n",(0,o.jsx)(n.h2,{id:"console-logging",children:"Console Logging"}),"\n",(0,o.jsxs)(n.p,{children:["Use ",(0,o.jsx)(n.code,{children:"console.log"})," with a tag prefix to identify your mod's output:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",children:"const TAG = '[MyMod]';\nconsole.log(`${TAG} Initialized`);\nconsole.warn(`${TAG} Something unexpected`, someData);\nconsole.error(`${TAG} Failed to load`, error);\n"})}),"\n",(0,o.jsx)(n.h3,{id:"viewing-logs",children:"Viewing Logs"}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"In-game"}),": Open the developer console with ",(0,o.jsx)(n.strong,{children:"Ctrl+Shift+I"})," (Windows/Linux) or ",(0,o.jsx)(n.strong,{children:"Cmd+Option+I"}),"\n(Mac)."]}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsxs)(n.strong,{children:["With ",(0,o.jsx)(n.code,{children:"pnpm dev"})]}),": Logs are printed to your terminal and saved to ",(0,o.jsx)(n.code,{children:"debug/latest.log"}),". The game\nlauncher enables Electron logging automatically."]}),"\n",(0,o.jsx)(n.h2,{id:"error-handling",children:"Error Handling"}),"\n",(0,o.jsx)(n.p,{children:"Wrap your initialization in try/catch to avoid crashing the game:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",children:"api.hooks.onMapReady((_map) => {\n  if (initialized) return;\n  initialized = true;\n\n  try {\n    // Setup code\n    console.log(`${TAG} Initialized successfully.`);\n  } catch (err) {\n    console.error(`${TAG} Failed to initialize:`, err);\n    api.ui.showNotification('My Mod failed to load. Check console.', 'error');\n  }\n});\n"})}),"\n",(0,o.jsx)(n.p,{children:"For hooks that run repeatedly, consider wrapping each callback:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",children:"api.hooks.onDayChange((day) => {\n  try {\n    // Your logic\n  } catch (err) {\n    console.error(`${TAG} Error on day ${day}:`, err);\n  }\n});\n"})}),"\n",(0,o.jsx)(n.h2,{id:"game-error-hooks",children:"Game Error Hooks"}),"\n",(0,o.jsx)(n.p,{children:"The API provides hooks for catching game-level warnings and errors:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",children:"api.hooks.onWarning((message) => {\n  console.warn(`${TAG} Game warning:`, message);\n});\n\napi.hooks.onError((error) => {\n  console.error(`${TAG} Game error:`, error);\n});\n"})}),"\n",(0,o.jsx)(n.h2,{id:"type-checking",children:"Type Checking"}),"\n",(0,o.jsx)(n.p,{children:"Run TypeScript's type checker to catch errors before building:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"pnpm typecheck\n"})}),"\n",(0,o.jsxs)(n.p,{children:["This runs ",(0,o.jsx)(n.code,{children:"tsc --noEmit"})," and reports any type errors without producing output files. It's a good\npractice to run this before testing in-game."]}),"\n",(0,o.jsx)(n.h2,{id:"common-issues",children:"Common Issues"}),"\n",(0,o.jsx)(n.h3,{id:"subwaybuilderapi-not-found",children:'"SubwayBuilderAPI Not Found"'}),"\n",(0,o.jsx)(n.p,{children:"Your mod script ran before the game initialized the API. This shouldn't happen with the template's\nstructure, but if it does:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["Make sure ",(0,o.jsx)(n.code,{children:"main"})," in ",(0,o.jsx)(n.code,{children:"manifest.json"})," is ",(0,o.jsx)(n.code,{children:'"index.js"'})]}),"\n",(0,o.jsxs)(n.li,{children:["Make sure you're checking ",(0,o.jsx)(n.code,{children:"if (!api)"})," before using the API"]}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"ui-not-showing-up",children:"UI Not Showing Up"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["Check that you're registering UI inside ",(0,o.jsx)(n.code,{children:"onMapReady"})," \u2014 the UI system isn't ready before the map\nloads"]}),"\n",(0,o.jsx)(n.li,{children:"Verify your component doesn't throw during render (check console for React errors)"}),"\n",(0,o.jsxs)(n.li,{children:["Make sure the ",(0,o.jsx)(n.code,{children:"id"})," you're using is unique \u2014 duplicate IDs silently fail"]}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"changes-not-appearing-after-reload",children:"Changes Not Appearing After Reload"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Verify Vite rebuilt successfully (check terminal for build errors)"}),"\n",(0,o.jsxs)(n.li,{children:["Make sure the symlink is still intact (",(0,o.jsx)(n.code,{children:"pnpm dev:link"}),")"]}),"\n",(0,o.jsx)(n.li,{children:"Try a full game restart if hot reload isn't picking up changes"}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"react-hooks-errors",children:'React Hooks Errors ("Invalid Hook Call")'}),"\n",(0,o.jsx)(n.p,{children:"This usually means there are multiple React instances. Make sure:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["You're importing from ",(0,o.jsx)(n.code,{children:"'react'"})," (not installing react as a dependency)"]}),"\n",(0,o.jsxs)(n.li,{children:["The Vite alias in ",(0,o.jsx)(n.code,{children:"vite.config.ts"})," is correctly pointing to ",(0,o.jsx)(n.code,{children:"src/types/react.ts"})]}),"\n",(0,o.jsxs)(n.li,{children:["You haven't accidentally installed ",(0,o.jsx)(n.code,{children:"react"})," in ",(0,o.jsx)(n.code,{children:"node_modules"})]}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"windows-symlink-permission-error",children:"Windows Symlink Permission Error"}),"\n",(0,o.jsx)(n.p,{children:"On Windows, creating symlinks may require Administrator privileges. Either:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Run your terminal as Administrator"}),"\n",(0,o.jsx)(n.li,{children:"Enable Developer Mode in Windows Settings (Settings > For Developers > Developer Mode)"}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(c,{...e})}):c(e)}},1753(e,n,i){i.d(n,{R:()=>l,x:()=>t});var r=i(758);const o={},s=r.createContext(o);function l(e){const n=r.useContext(s);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:l(e.components),r.createElement(s.Provider,{value:n},e.children)}}}]);