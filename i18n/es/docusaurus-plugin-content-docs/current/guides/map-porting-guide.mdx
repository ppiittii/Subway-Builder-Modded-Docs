---
id: map-porting-guide
title: Guía de Portación de Mapas
---

Esta guía es para cualquier mapa creado antes de la versión 1.0.0 y el lanzamiento del API de mods, como el [Pack Australia/Nueva Zelanda de expedtadam](https://drive.google.com/drive/folders/18fpT9ASi3kMIK0lYjOzAbb-IM_RPZ6cz). Requiere un poco más de configuración, pero aún puede ser portado al nuevo framework relativamente fácil.

### Paso 1 - Instalando el Gestor de Mapas
Descarga la última versión del Gestor de Mapas en https://github.com/Kronifer/subwaybuilder-patcher/releases. Para descargar, haz clic en la versión correspondiente a tu sistema operativo.

<img width="1000" alt="image" src="https://github.com/user-attachments/assets/4bc7b27d-9868-475f-9a4a-5ce447a77036" />

:::note
Para Windows, necesitas el archivo `.exe`. Para Linux, el archivo `.zip`. Para MacOS, usa `arm64.dmg` si tu Mac tiene un chip Apple Silicon (ej. M1, M2, M3, etc.) y `x64.dmg` si tu Mac tiene un chip Intel. Como regla general, los Mac posteriores a 2021 tienden a tener chips Apple Silicon y los modelos más antiguos chips Intel, pero verifica siempre.
:::

:::note
En MacOS, el instalador .dmg probablemente esté en cuarentena. Para ejecutarlo, abre una terminal en la carpeta donde descargaste el instalador y ejecuta `xattr -d com.apple.quarantine {INSTALLER_FILENAME}`. Por ejemplo, al descargar la versión 0.2.7 para un Mac ARM, ejecuta `xattr -d com.apple.quarantine Subway.Builder.Map.Manager-0.2.7-arm64.dmg`.
:::

Después de esto, instala la aplicación como cualquier otra. Una vez terminado el instalador, abre la app y sigue el proceso de configuración. En este punto es seguro eliminar el ZIP, el instalador y cualquier otro archivo descargado.

### Paso 2 - Extrayendo los Archivos
Ahora necesitamos extraer los archivos necesarios del mapa descargado. Necesitamos 6 archivos en total:
 - `XXX.pmtiles` (`XXX` es el código de tu ciudad; ej. `MIA` para Miami)
 - `demand_data.json`
 - `buildings_index.json`
 - `roads.geojson`
 - `runways_taxiways.geojson`
 - `config.json`

El primero es fácil. Busca el archivo `XXX.pmtiles` en el mapa descargado. Está en algún lugar del directorio, ya sea en la raíz o dentro de una carpeta. Por ahora, crea una carpeta temporal de trabajo para guardar los 6 archivos.

Los siguientes 4 requieren más trabajo. Deben estar en forma comprimida (`.gz`). Necesitaremos extraerlos como archivo.

:::important
Si tus 4 archivos son `.gz` (ej. `demand_data.json.gz`), sigue leyendo y sigue los pasos. Si no lo son (ej. `demand_data.json`), muévelos a la carpeta temporal y continúa al Paso 3. Si los 4 archivos faltan, el mapa está incompleto. Puedes [generar los datos tú mismo](https://github.com/kaicardenas0618/Subway-Builder-Map-Directory/wiki/Creating-a-Custom-Map) o buscar otro mapa.
:::

:::tip
En Windows y Linux puedes usar [7-Zip](https://www.7-zip.org/download.html) para extraer `.gz`. MacOS soporta nativamente archivos gzip; solo haz doble clic para extraer.
:::

Dentro verás un único archivo. Por ejemplo, dentro de `demand_data.json.gz`, verás `demand_data.json`. Haz lo mismo con los otros 3 archivos y colócalos en la carpeta temporal. Algunos mapas tienen archivos duplicados, cualquiera sirve.

### Paso 3 - Creando el Config
El último archivo que necesitamos es `config.json`. Este es el más complicado. Primero, crea un archivo nuevo llamado `config.json`.

:::tip
Asegúrate que sea `.json`. Busca en Google cómo habilitar extensiones de archivo si tu sistema no lo muestra.
:::

Dentro de `config.json`, pega esta plantilla:
```
{
    "name": "Boise",
    "code": "BOI",
    "description": "Build a rapid transit network for one of America`s fastest growing cities.",
    "population": 329866,
    "initialViewState": {
        "zoom": 13,
        "latitude": 43.617499,
        "longitude": -116.245394,
        "bearing": 0
    },
    "creator": "muffintime",
    "version": "2.1.0"
}
```

Debemos editar estos datos para que coincidan con nuestro mapa. Busca un archivo `.js` en el directorio (comúnmente `index.js`, `main.js` o `config.js`).

<img width="1097" height="402" alt="image" src="https://github.com/user-attachments/assets/b25a1577-badf-4adf-a414-d76003c3a26d" />

> Esto está dentro de `index.js` del Pack de Ciudades Canadienses.

:::tip
Si hay varios `.js`, revisa todos; uno contendrá los datos que necesitas.
:::

De este archivo obtenemos:
 - `name`
 - `code`
 - `description`
 - `population`
 - `initialViewState` (y todos sus argumentos)

:::note
Si no incluye `initialViewState`, pon 12 o 13 en `zoom` y 0 en `bearing`. Para `latitude` y `longitude`, elige cualquier valor dentro del rango de coordenadas de tu bbox. En el ejemplo de Toronto, podemos usar 44.0 y -79.0.
:::

Los últimos dos datos necesarios son `creator` y `version`. No vienen en el pack, pero son requeridos. Usa el `creator` listado en la [página de descarga](https://github.com/kaicardenas0618/Subway-Builder-Map-Directory/wiki/Map-Directory). Pon cualquier valor para `version`. Una vez que tengas los 6 archivos, continúa.

:::important
Aunque no es obligatorio, si planeas compartir el mapa portado, incluye el `creator` para dar crédito a los creadores originales.
:::

### Paso 4 - Comprimir los Archivos
Ahora que tenemos los 6 archivos, empaquétalos en un `.zip`. Esto se puede hacer nativamente en Windows, Linux, o MacOS usando `Compress`, o con [7-Zip](https://www.7-zip.org/download.html). Una vez hecho `.zip`, el mod está básicamente listo y solo queda importarlo al juego.

### Paso 5 - Añadiendo el Mapa
Para instalar un mapa, haz clic en `ADD A MAP` y selecciona el ZIP. Aparecerá el nombre del mapa, el creador y la versión.

<img width="1200" alt="image" src="https://github.com/user-attachments/assets/c258cf39-c211-4677-8ac1-0828a97d5c61" />

Después de importar todos los mapas, haz clic en `GENERATE MOD`. Esto añade automáticamente los mapas al juego y registra el Map Manager como mod.

Si quieres añadir otro mapa después, vuelve a abrir Map Manager e importa todos los mapas deseados (incluso los ya existentes). Haz clic en `GENERATE MOD` y se añadirán automáticamente. Si no vuelves a añadir los mapas viejos, serán eliminados.

### Paso 6 - Lanzando Subway Builder
Una vez añadidos todos los mapas y generado el mod, inicia el juego con `START GAME`. Ahora siempre usarás este método. En el juego, los mapas aparecerán en la pestaña `CUSTOM` listos para jugar.

:::important
Debido a cómo funciona el juego actualmente, debes lanzarlo siempre desde Map Manager para que los edificios y el agua aparezcan.
:::
