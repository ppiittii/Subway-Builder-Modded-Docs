---
id: legacy-map-installation-guide
title: Guida all’Installazione delle Mappe (Legacy)
---

Prima dello sviluppo del Map Manager, veniva utilizzato il metodo `serve`. Era più complesso e variava da mappa a mappa, ma possiamo facilmente estrarre i file necessari e portare la mappa nel Map Manager.

### Passaggio 1 - Installare il Map Manager
Scarica l’ultima versione del Map Manager da https://github.com/Kronifer/subwaybuilder-patcher/releases. Per scaricarla, fai clic sulla versione corrispondente al tuo sistema operativo.

:::note
Per Windows, scarica il file `.exe`. Per Linux, il file `.zip`. Per MacOS, utilizza il file `arm64.dmg` se il tuo Mac ha un chip Apple Silicon (ad esempio M1, M2, M3, ecc.) e il file `x64.dmg` se il tuo Mac ha un chip Intel. In generale, i Mac prodotti dopo il 2021 tendono ad avere chip Apple Silicon, mentre i modelli più vecchi tendono ad avere chip Intel, ma verifica perché esistono eccezioni.
:::

:::note
Su MacOS, l’installer `.dmg` potrebbe essere messo in quarantena. Per eseguirlo, apri un terminale nella cartella in cui hai scaricato il file ed esegui `xattr -d com.apple.quarantine {INSTALLER_FILENAME}`. Ad esempio, scaricando la versione 0.2.7 per un Mac ARM, dovresti eseguire `xattr -d com.apple.quarantine Subway.Builder.Map.Manager-0.2.7-arm64.dmg`.
:::

Successivamente, installa l’app come qualsiasi altra applicazione. Una volta completata l’installazione, avvia l’app e segui la procedura di configurazione. A questo punto puoi eliminare il file ZIP, l’installer e qualsiasi altro file scaricato.

### Passaggio 2 - Estrarre i File
Ora dobbiamo estrarre i file necessari dalla mappa che hai scaricato. In totale ci servono 6 file:

 - `XXX.pmtiles` (`XXX` è il codice della tua città; ad esempio `MIA` per Miami)
 - `demand_data.json`
 - `buildings_index.json`
 - `roads.geojson`
 - `runways_taxiways.geojson`
 - `config.json`

Il primo è semplice. Cerca il file `XXX.pmtiles` nella directory della mappa scaricata (potrebbe trovarsi nella cartella principale o in una sottocartella). Crea una cartella temporanea dove inseriremo i 6 file.

I successivi 4 file richiedono un po’ più di lavoro. Sono in formato compresso (terminano con `.gz`). Dobbiamo estrarli.

:::tip
Su Windows e Linux puoi usare [7-Zip](https://www.7-zip.org/download.html) per estrarre gli archivi `.gz`. Su MacOS puoi semplicemente fare doppio clic, poiché il sistema supporta nativamente gli archivi gzip.
:::

All’interno troverai un singolo file (ad esempio `demand_data.json`). Estrai tutti e 4 i file e mettili nella cartella temporanea. Alcune mappe contengono file duplicati: non importa quale scegli, sono identici.

L’ultimo file necessario è `config.json`. È il più complesso. Crea un nuovo file chiamato `config.json`.

:::tip
Assicurati che sia un file `.json`. Se non vedi l’estensione, cerca online come abilitare la visualizzazione delle estensioni dei file nel tuo sistema operativo.
:::

All’interno di `config.json`, incolla questo modello:
```
{
  "name": "Boise",
  "code": "BOI",
  "description": "Costruisci una rete di trasporto rapido per una delle città americane in più rapida crescita.",
  "population": 329866,
  "initialViewState": {
    "zoom": 13,
    "latitude": 43.617499,
    "longitude": -116.245394,
    "bearing": 0
  },
  "creator": "muffintime",
  "version": "2.1.0"
}
```


Modifica i dati in modo che corrispondano alla tua mappa. Nella directory della mappa dovrebbe esserci un file `.js`, solitamente `index.js`, con informazioni simili.

Se sono presenti più file `.js`, controllali tutti.

Da questo file possiamo ottenere:
 - `name`
 - `code`
 - `description`
 - `population`
 - `initialViewState` (e tutti i suoi parametri)

:::note
Se `initialViewState` non è presente, puoi usare 12 o 13 come `zoom` e 0 come `bearing`. Per `latitude` e `longitude`, scegli un valore all’interno dell’intervallo bbox (la `latitude` corrisponde al 2° e 4° numero, la `longitude` al 1° e 3°).
:::

Gli ultimi due campi, `creator` e `version`, si trovano in `manifest.json`. Una volta raccolti tutti i dati, assicurati di avere tutti e 6 i file.

:::important
Se prevedi di condividere la mappa convertita, includi il `creator` per dare credito agli autori originali.
:::

### Passaggio 3 - Comprimere i File
Comprimi i 6 file in un archivio `.zip`.

### Passaggio 4 - Aggiungere la Mappa
Clicca su `ADD A MAP` e importa il file ZIP. Poi clicca su `GENERATE MOD`.

Se aggiungi un’altra mappa in seguito, reimporta tutte le mappe (anche quelle già presenti) prima di cliccare `GENERATE MOD`, altrimenti le vecchie mappe verranno rimosse.

### Passaggio 5 - Avviare Subway Builder
Avvia il gioco tramite `START GAME`. Le mappe personalizzate appariranno nella scheda `CUSTOM`.

:::important
Devi sempre avviare il gioco tramite il Map Manager per far apparire correttamente edifici e acqua.
:::
