"use strict";(self.webpackChunksubway_builder_modded_docs=self.webpackChunksubway_builder_modded_docs||[]).push([[261],{2299(e,n,s){s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>a,default:()=>u,frontMatter:()=>c,metadata:()=>i,toc:()=>r});const i=JSON.parse('{"id":"project-structure","title":"Estructura del Proyecto","description":"Aqu\xed se explica qu\xe9 hace cada archivo en la plantilla.","source":"@site/i18n/es/docusaurus-plugin-content-docs-modding-docs/current/project-structure.mdx","sourceDirName":".","slug":"/project-structure","permalink":"/es/modding-docs/project-structure","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"id":"project-structure","title":"Estructura del Proyecto"},"sidebar":"docs","previous":{"title":"Primeros Pasos","permalink":"/es/modding-docs/getting-started"},"next":{"title":"Patrones Comunes","permalink":"/es/modding-docs/common-patterns"}}');var t=s(6070),o=s(1753);const c={id:"project-structure",title:"Estructura del Proyecto"},a=void 0,d={},r=[{value:"Archivos Clave",id:"key-files",level:2},{value:"<code>manifest.json</code>",id:"manifest.json",level:3},{value:"<code>src/main.ts</code>",id:"main.ts",level:3},{value:"<code>src/ui/ExamplePanel.tsx</code>",id:"examplepanel.tsx",level:3},{value:"<code>src/types/react.ts</code>",id:"react.ts",level:3},{value:"<code>vite.config.ts</code>",id:"vite.config.ts",level:3},{value:"<code>tsconfig.json</code>",id:"tsconfig.json",level:3},{value:"<code>scripts/link.ts</code>",id:"link.ts",level:3},{value:"<code>scripts/run.ts</code>",id:"run.ts",level:3}];function l(e){const n={code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.p,{children:"Aqu\xed se explica qu\xe9 hace cada archivo en la plantilla."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"\u251c\u2500\u2500 src/\n\u2502 \u251c\u2500\u2500 main.ts                 # Punto de entrada de tu mod\n\u2502 \u251c\u2500\u2500 ui/\n\u2502 \u2502 \u2514\u2500\u2500 ExamplePanel.tsx      # Componente de ejemplo en React\n\u2502 \u2514\u2500\u2500 types/\n\u2502 \u251c\u2500\u2500 react.ts                # Shim de React (obtiene React desde la API del juego)\n\u2502 \u251c\u2500\u2500 index.d.ts              # Re-exportaciones + declaraciones globales de Window\n\u2502 \u251c\u2500\u2500 api.d.ts                # Interfaz principal ModdingAPI\n\u2502 \u251c\u2500\u2500 core.d.ts               # Coordinate, BoundingBox, GameSpeed\n\u2502 \u251c\u2500\u2500 game-state.d.ts         # Tipos Station, Track, Train, Route\n\u2502 \u251c\u2500\u2500 game-constants.d.ts     # GameConstants, ConstructionCosts\n\u2502 \u251c\u2500\u2500 game-actions.d.ts       # Tipos Bond, BondType\n\u2502 \u251c\u2500\u2500 build.d.ts              # Tipos de automatizaci\xf3n de construcci\xf3n\n\u2502 \u251c\u2500\u2500 ui.d.ts                 # Ubicaciones de UI y tipos de opciones\n\u2502 \u251c\u2500\u2500 cities.d.ts             # Tipos City, CityConfig\n\u2502 \u251c\u2500\u2500 trains.d.ts             # TrainTypeConfig, TrainTypeStats\n\u2502 \u251c\u2500\u2500 stations.d.ts           # StationTypeConfig\n\u2502 \u251c\u2500\u2500 map.d.ts                # Fuentes de mapa, capas, overrides\n\u2502 \u251c\u2500\u2500 career.d.ts             # MissionConfig, StarConfig\n\u2502 \u251c\u2500\u2500 content-templates.d.ts  # Plantillas de peri\xf3dico y tweets\n\u2502 \u251c\u2500\u2500 pop-timing.d.ts         # CommuteTimeRange\n\u2502 \u251c\u2500\u2500 i18n.d.ts               # I18nAPI\n\u2502 \u251c\u2500\u2500 utils.d.ts              # RechartsComponents\n\u2502 \u251c\u2500\u2500 schemas.d.ts            # Esquemas de validaci\xf3n Zod\n\u2502 \u251c\u2500\u2500 electron.d.ts           # Tipos ElectronAPI\n\u2502 \u2514\u2500\u2500 manifest.d.ts           # Tipo ModManifest\n\u251c\u2500\u2500 scripts/\n\u2502 \u251c\u2500\u2500 run.ts                  # Lanzador del juego con logging\n\u2502 \u2514\u2500\u2500 link.ts                 # Gesti\xf3n de symlinks\n\u251c\u2500\u2500 manifest.json             # Metadatos del mod (cargados por el juego)\n\u251c\u2500\u2500 vite.config.ts            # Configuraci\xf3n de compilaci\xf3n\n\u251c\u2500\u2500 tsconfig.json             # Configuraci\xf3n de TypeScript\n\u2514\u2500\u2500 package.json              # Dependencias y scripts\n"})}),"\n",(0,t.jsx)(n.h2,{id:"key-files",children:"Archivos Clave"}),"\n",(0,t.jsx)(n.h3,{id:"manifest.json",children:(0,t.jsx)(n.code,{children:"manifest.json"})}),"\n",(0,t.jsx)(n.p,{children:"El juego lee este archivo para identificar tu mod. Campos obligatorios:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "id": "com.author.modname",\n  "name": "My Mod Genial",\n  "description": "Hace algo genial",\n  "version": "1.0.0",\n  "author": { "name": "Su nombre" },\n  "main": "index.js"\n}\n'})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"id"})," \u2014 identificador \xfanico en notaci\xf3n de dominio invertido"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"main"})," \u2014 siempre ",(0,t.jsx)(n.code,{children:'"index.js"'})," (la salida de compilaci\xf3n de Vite)"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"main.ts",children:(0,t.jsx)(n.code,{children:"src/main.ts"})}),"\n",(0,t.jsx)(n.p,{children:"El punto de entrada de tu mod. Aqu\xed registras hooks, agregas elementos de UI y configuras la l\xf3gica\nde tu mod. La plantilla incluye un ejemplo funcional:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",children:"const api = window.SubwayBuilderAPI;\n\nif (!api) {\n  console.error('\xa1SubwayBuilderAPI no encontrado!');\n} else {\n  let initialized = false;\n\n  api.hooks.onMapReady((_map) => {\n    if (initialized) return;\n    initialized = true;\n\n    // Configura tu mod aqu\xed\n    api.ui.addFloatingPanel({\n      id: 'my-mod-panel',\n      title: 'Mi Mod Genial',\n      icon: 'Puzzle',\n      render: ExamplePanel,\n    });\n  });\n}\n"})}),"\n",(0,t.jsx)(n.h3,{id:"examplepanel.tsx",children:(0,t.jsx)(n.code,{children:"src/ui/ExamplePanel.tsx"})}),"\n",(0,t.jsx)(n.p,{children:"Un componente de ejemplo en React que demuestra c\xf3mo usar componentes de UI del juego y hooks dentro\nde un panel flotante:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:'import { useState } from \'react\';\n\nconst api = window.SubwayBuilderAPI;\nconst { Button } = api.utils.components as Record<string, React.ComponentType<any>>;\n\nexport function ExamplePanel() {\n  const [count, setCount] = useState(0);\n\n  return (\n    <div className="flex flex-col gap-3 p-3">\n      <p className="text-sm text-muted-foreground">Recuento de clics: {count}</p>\n      <Button onClick={() => setCount((c) => c + 1)}>Incrementar</Button>\n    </div>\n  );\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"react.ts",children:(0,t.jsx)(n.code,{children:"src/types/react.ts"})}),"\n",(0,t.jsx)(n.p,{children:"El shim de React. As\xed es como funciona JSX en los mods \u2014 en lugar de incluir React en el bundle, el\nshim obtiene React desde la API del juego en tiempo de ejecuci\xf3n:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",children:"const React = window.SubwayBuilderAPI.utils.React;\n\nexport default React;\nexport const { useState, useEffect, useCallback, useMemo, useRef /* ... */ } = React;\n\n// Exportaciones del runtime JSX\nexport const jsx = React.createElement;\nexport const jsxs = React.createElement;\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Vite est\xe1 configurado para redirigir las importaciones de ",(0,t.jsx)(n.code,{children:"react"})," y ",(0,t.jsx)(n.code,{children:"react/jsx-runtime"})," a este\narchivo, por lo que puedes escribir el est\xe1ndar ",(0,t.jsx)(n.code,{children:"import { useState } from 'react'"})," y funcionar\xe1 sin\nproblemas."]}),"\n",(0,t.jsx)(n.h3,{id:"vite.config.ts",children:(0,t.jsx)(n.code,{children:"vite.config.ts"})}),"\n",(0,t.jsx)(n.p,{children:"La configuraci\xf3n de compilaci\xf3n. Puntos clave:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Formato de salida"}),": IIFE (expresi\xf3n de funci\xf3n autoejecutable) \u2014 el juego espera un \xfanico\nscript, no m\xf3dulos ES"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Alias de React"}),": Redirige las importaciones de ",(0,t.jsx)(n.code,{children:"react"})," a trav\xe9s del shim"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Copia est\xe1tica"}),": Copia ",(0,t.jsx)(n.code,{children:"manifest.json"})," dentro de ",(0,t.jsx)(n.code,{children:"dist/"})," junto al JS compilado"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Sin minificaci\xf3n"}),": Mantiene la salida legible para facilitar la depuraci\xf3n"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"tsconfig.json",children:(0,t.jsx)(n.code,{children:"tsconfig.json"})}),"\n",(0,t.jsx)(n.p,{children:"Configuraci\xf3n est\xe1ndar de TypeScript con:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"strict: true"})," \u2014 seguridad de tipos completa"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:'jsx: "react-jsx"'})," \u2014 transformaci\xf3n autom\xe1tica de JSX"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"noEmit: true"})," \u2014 TypeScript se usa solo para verificaci\xf3n de tipos; Vite se encarga de la\ncompilaci\xf3n real"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"link.ts",children:(0,t.jsx)(n.code,{children:"scripts/link.ts"})}),"\n",(0,t.jsxs)(n.p,{children:["Crea un symlink desde ",(0,t.jsx)(n.code,{children:"dist/"})," a la carpeta de mods del juego. Lee el ID del mod desde\n",(0,t.jsx)(n.code,{children:"manifest.json"})," y usa el \xfaltimo segmento como nombre de la carpeta (por ejemplo, ",(0,t.jsx)(n.code,{children:"com.author.mymod"}),"\nse convierte en ",(0,t.jsx)(n.code,{children:"mymod/"}),")."]}),"\n",(0,t.jsx)(n.h3,{id:"run.ts",children:(0,t.jsx)(n.code,{children:"scripts/run.ts"})}),"\n",(0,t.jsxs)(n.p,{children:["Encuentra el ejecutable de Subway Builder en tu sistema y lo inicia con ",(0,t.jsx)(n.code,{children:"ELECTRON_ENABLE_LOGGING=1"}),".\nCaptura stdout/stderr en ",(0,t.jsx)(n.code,{children:"debug/latest.log"})," para que puedas revisar la salida de la consola despu\xe9s\nde la sesi\xf3n."]})]})}function u(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(l,{...e})}):l(e)}},1753(e,n,s){s.d(n,{R:()=>c,x:()=>a});var i=s(758);const t={},o=i.createContext(t);function c(e){const n=i.useContext(o);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:c(e.components),i.createElement(o.Provider,{value:n},e.children)}}}]);