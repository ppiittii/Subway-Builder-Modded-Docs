"use strict";(self.webpackChunksubway_builder_modded_docs=self.webpackChunksubway_builder_modded_docs||[]).push([[363],{9460(e,n,r){r.r(n),r.d(n,{assets:()=>l,contentTitle:()=>d,default:()=>u,frontMatter:()=>i,metadata:()=>o,toc:()=>c});const o=JSON.parse('{"id":"debugging","title":"Depuraci\xf3n","description":"Consejos para depurar tus mods durante el desarrollo.","source":"@site/i18n/es/docusaurus-plugin-content-docs-modding-docs/current/debugging.mdx","sourceDirName":".","slug":"/debugging","permalink":"/es/modding-docs/debugging","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"id":"debugging","title":"Depuraci\xf3n"},"sidebar":"docs","previous":{"title":"Componentes de React","permalink":"/es/modding-docs/react-components"},"next":{"title":"Referencia de Tipos","permalink":"/es/modding-docs/type-reference"}}');var s=r(6070),a=r(1753);const i={id:"debugging",title:"Depuraci\xf3n"},d=void 0,l={},c=[{value:"Recarga en Caliente",id:"hot-reload",level:2},{value:"Registro en Consola",id:"console-logging",level:2},{value:"Ver los Logs",id:"viewing-logs",level:3},{value:"Manejo de Errores",id:"error-handling",level:2},{value:"Hooks de Errores del Juego",id:"game-error-hooks",level:2},{value:"Verificaci\xf3n de Tipos",id:"type-checking",level:2},{value:"Problemas Comunes",id:"common-issues",level:2},{value:"&quot;SubwayBuilderAPI Not Found&quot;",id:"subwaybuilderapi-not-found",level:3},{value:"La UI No Aparece",id:"ui-not-showing-up",level:3},{value:"Los Cambios No Aparecen Despu\xe9s de Recargar",id:"changes-not-appearing-after-reload",level:3},{value:"Errores de React Hooks (&quot;Invalid Hook Call&quot;)",id:"react-hooks-errors",level:3},{value:"Error de Permisos de Symlink en Windows",id:"windows-symlink-permission-error",level:3}];function t(e){const n={admonition:"admonition",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.p,{children:"Consejos para depurar tus mods durante el desarrollo."}),"\n",(0,s.jsx)(n.h2,{id:"hot-reload",children:"Recarga en Caliente"}),"\n",(0,s.jsx)(n.p,{children:"La forma m\xe1s r\xe1pida de probar cambios es la recarga en caliente. Despu\xe9s de reconstruir tu mod:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Presiona ",(0,s.jsx)(n.strong,{children:"Ctrl+Shift+R"})," (Windows/Linux) o ",(0,s.jsx)(n.strong,{children:"Cmd+Shift+R"})," (Mac) dentro del juego"]}),"\n",(0,s.jsxs)(n.li,{children:["Esto llama internamente a ",(0,s.jsx)(n.code,{children:"api.reloadMods()"}),", que limpia todos los callbacks del mod, componentes\nde UI, capas personalizadas y tipos de tren personalizados, y luego vuelve a ejecutar todos los\nscripts del mod"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["Si est\xe1s usando ",(0,s.jsx)(n.code,{children:"pnpm dev"}),", Vite reconstruye autom\xe1ticamente al guardar el archivo, as\xed que solo\nnecesitas presionar el atajo de recarga dentro del juego."]}),"\n",(0,s.jsx)(n.admonition,{type:"note",children:(0,s.jsx)(n.p,{children:"La recarga en caliente limpia la mayor parte del estado del mod, pero algunas cosas\npersisten (como v\xedas y estaciones ya construidas). Si tu mod entra en un estado extra\xf1o, reiniciar\nel juego completamente es la forma m\xe1s segura de restablecerlo."})}),"\n",(0,s.jsx)(n.h2,{id:"console-logging",children:"Registro en Consola"}),"\n",(0,s.jsxs)(n.p,{children:["Usa ",(0,s.jsx)(n.code,{children:"console.log"})," con un prefijo identificador para distinguir la salida de tu mod:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"const TAG = '[MyMod]';\nconsole.log(`${TAG} Inicializado`);\nconsole.warn(`${TAG} Algo inesperado`, someData);\nconsole.error(`${TAG} Error al cargar`, error);\n"})}),"\n",(0,s.jsx)(n.h3,{id:"viewing-logs",children:"Ver los Logs"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Dentro del juego"}),": Abre la consola de desarrollador con ",(0,s.jsx)(n.strong,{children:"Ctrl+Shift+I"})," (Windows/Linux) o\n",(0,s.jsx)(n.strong,{children:"Cmd+Option+I"})," (Mac)."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsxs)(n.strong,{children:["Con ",(0,s.jsx)(n.code,{children:"pnpm dev"})]}),": Los logs se imprimen en tu terminal y se guardan en ",(0,s.jsx)(n.code,{children:"debug/latest.log"}),". El\nlanzador del juego habilita autom\xe1ticamente el registro de Electron."]}),"\n",(0,s.jsx)(n.h2,{id:"error-handling",children:"Manejo de Errores"}),"\n",(0,s.jsx)(n.p,{children:"Envuelve tu inicializaci\xf3n en try/catch para evitar que el juego se bloquee:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"api.hooks.onMapReady((_map) => {\n  if (initialized) return;\n  initialized = true;\n\n  try {\n    // C\xf3digo de configuraci\xf3n\n    console.log(`${TAG} Inicializado correctamente.`);\n  } catch (err) {\n    console.error(`${TAG} Error al inicializar:`, err);\n    api.ui.showNotification('My Mod fall\xf3 al cargar. Revisa la consola.', 'error');\n  }\n});\n"})}),"\n",(0,s.jsx)(n.p,{children:"Para hooks que se ejecutan repetidamente, considera envolver cada callback:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"api.hooks.onDayChange((day) => {\n  try {\n    // Tu l\xf3gica\n  } catch (err) {\n    console.error(`${TAG} Error en el d\xeda ${day}:`, err);\n  }\n});\n"})}),"\n",(0,s.jsx)(n.h2,{id:"game-error-hooks",children:"Hooks de Errores del Juego"}),"\n",(0,s.jsx)(n.p,{children:"La API proporciona hooks para capturar advertencias y errores a nivel del juego:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"api.hooks.onWarning((message) => {\n  console.warn(`${TAG} Advertencia del juego:`, message);\n});\n\napi.hooks.onError((error) => {\n  console.error(`${TAG} Error del juego:`, error);\n});\n"})}),"\n",(0,s.jsx)(n.h2,{id:"type-checking",children:"Verificaci\xf3n de Tipos"}),"\n",(0,s.jsx)(n.p,{children:"Ejecuta el verificador de tipos de TypeScript para detectar errores antes de compilar:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"pnpm typecheck\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Esto ejecuta ",(0,s.jsx)(n.code,{children:"tsc --noEmit"})," y reporta cualquier error de tipos sin generar archivos de salida. Es\nuna buena pr\xe1ctica ejecutarlo antes de probar dentro del juego."]}),"\n",(0,s.jsx)(n.h2,{id:"common-issues",children:"Problemas Comunes"}),"\n",(0,s.jsx)(n.h3,{id:"subwaybuilderapi-not-found",children:'"SubwayBuilderAPI Not Found"'}),"\n",(0,s.jsx)(n.p,{children:"El script de tu mod se ejecut\xf3 antes de que el juego inicializara la API. Esto no deber\xeda ocurrir\ncon la estructura de la plantilla, pero si sucede:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Aseg\xfarate de que ",(0,s.jsx)(n.code,{children:"main"})," en ",(0,s.jsx)(n.code,{children:"manifest.json"})," sea ",(0,s.jsx)(n.code,{children:'"index.js"'})]}),"\n",(0,s.jsxs)(n.li,{children:["Aseg\xfarate de verificar ",(0,s.jsx)(n.code,{children:"if (!api)"})," antes de usar la API"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"ui-not-showing-up",children:"La UI No Aparece"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Verifica que est\xe9s registrando la UI dentro de ",(0,s.jsx)(n.code,{children:"onMapReady"})," \u2014 el sistema de UI no est\xe1 listo antes\nde que el mapa cargue"]}),"\n",(0,s.jsx)(n.li,{children:"Confirma que tu componente no lance errores durante el renderizado (revisa la consola para ver\nerrores de React)"}),"\n",(0,s.jsxs)(n.li,{children:["Aseg\xfarate de que el ",(0,s.jsx)(n.code,{children:"id"})," que est\xe1s usando sea \xfanico \u2014 los IDs duplicados fallan silenciosamente"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"changes-not-appearing-after-reload",children:"Los Cambios No Aparecen Despu\xe9s de Recargar"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Verifica que Vite haya reconstruido correctamente (revisa la terminal en busca de errores de\ncompilaci\xf3n)"}),"\n",(0,s.jsxs)(n.li,{children:["Aseg\xfarate de que el symlink siga intacto (",(0,s.jsx)(n.code,{children:"pnpm dev:link"}),")"]}),"\n",(0,s.jsx)(n.li,{children:"Intenta reiniciar el juego completamente si la recarga en caliente no detecta los cambios"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"react-hooks-errors",children:'Errores de React Hooks ("Invalid Hook Call")'}),"\n",(0,s.jsx)(n.p,{children:"Esto generalmente significa que hay m\xfaltiples instancias de React. Aseg\xfarate de que:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Est\xe9s importando desde ",(0,s.jsx)(n.code,{children:"'react'"})," (sin instalar react como dependencia)"]}),"\n",(0,s.jsxs)(n.li,{children:["El alias de Vite en ",(0,s.jsx)(n.code,{children:"vite.config.ts"})," apunte correctamente a ",(0,s.jsx)(n.code,{children:"src/types/react.ts"})]}),"\n",(0,s.jsxs)(n.li,{children:["No hayas instalado accidentalmente ",(0,s.jsx)(n.code,{children:"react"})," en ",(0,s.jsx)(n.code,{children:"node_modules"})]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"windows-symlink-permission-error",children:"Error de Permisos de Symlink en Windows"}),"\n",(0,s.jsx)(n.p,{children:"En Windows, crear symlinks puede requerir privilegios de Administrador. Puedes:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Ejecutar tu terminal como Administrador"}),"\n",(0,s.jsx)(n.li,{children:"Activar el Modo Desarrollador en la configuraci\xf3n de Windows (Configuraci\xf3n > Para\ndesarrolladores > Modo desarrollador)"}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(t,{...e})}):t(e)}},1753(e,n,r){r.d(n,{R:()=>i,x:()=>d});var o=r(758);const s={},a=o.createContext(s);function i(e){const n=o.useContext(a);return o.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),o.createElement(a.Provider,{value:n},e.children)}}}]);