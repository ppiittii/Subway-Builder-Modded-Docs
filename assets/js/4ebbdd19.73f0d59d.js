"use strict";(self.webpackChunksubway_builder_modded_docs=self.webpackChunksubway_builder_modded_docs||[]).push([[252],{8293(e,n,t){t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>c,default:()=>h,frontMatter:()=>r,metadata:()=>s,toc:()=>l});const s=JSON.parse('{"id":"react-components","title":"React Components","description":"Subway Builder mods can render custom UI using React. The game provides React at runtime \u2014 your mod","source":"@site/modding-docs/react-components.mdx","sourceDirName":".","slug":"/react-components","permalink":"/modding-docs/react-components","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"id":"react-components","title":"React Components"},"sidebar":"docs","previous":{"title":"Common Patterns","permalink":"/modding-docs/common-patterns"},"next":{"title":"Debugging","permalink":"/modding-docs/debugging"}}');var d=t(6070),i=t(1753);const r={id:"react-components",title:"React Components"},c=void 0,a={},l=[{value:"How the React Shim Works",id:"how-the-react-shim-works",level:2},{value:"Using Game UI Components",id:"using-game-ui-components",level:2},{value:"Available Components",id:"available-components",level:3},{value:"Button Example",id:"button-example",level:3},{value:"Card Example",id:"card-example",level:3},{value:"Using Lucide Icons",id:"using-lucide-icons",level:2},{value:"Using Recharts",id:"using-recharts",level:2},{value:"Available Chart Components",id:"available-chart-components",level:3},{value:"Styling With Tailwind",id:"styling-with-tailwind",level:2},{value:"Floating Panel Tips",id:"floating-panel-tips",level:2},{value:"Registering Custom Components at Placements",id:"registering-custom-components-at-placements",level:2}];function o(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(n.p,{children:"Subway Builder mods can render custom UI using React. The game provides React at runtime \u2014 your mod\ndoesn't need to bundle it."}),"\n",(0,d.jsx)(n.h2,{id:"how-the-react-shim-works",children:"How the React Shim Works"}),"\n",(0,d.jsxs)(n.p,{children:["The template includes a React shim at ",(0,d.jsx)(n.code,{children:"src/types/react.ts"})," that pulls React from the game's API:"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-ts",children:"const React = window.SubwayBuilderAPI.utils.React;\nexport default React;\nexport const { useState, useEffect, useCallback, useMemo, useRef } = React;\n"})}),"\n",(0,d.jsxs)(n.p,{children:["Vite is configured to alias all ",(0,d.jsx)(n.code,{children:"react"})," imports to this shim, so you can write standard React:"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-tsx",children:"import { useState, useEffect } from 'react';\n"})}),"\n",(0,d.jsx)(n.p,{children:"This just works \u2014 the import gets redirected to the shim at build time, and at runtime it uses the\ngame's React instance."}),"\n",(0,d.jsx)(n.h2,{id:"using-game-ui-components",children:"Using Game UI Components"}),"\n",(0,d.jsx)(n.p,{children:"The game exposes a set of styled UI components. Access them from the API:"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-tsx",children:"const api = window.SubwayBuilderAPI;\n\n// Cast to any since the components work at runtime but don't have strict prop types\nconst { Button, Card, CardHeader, CardTitle, CardContent } = api.utils.components as Record<\n  string,\n  React.ComponentType<any>\n>;\n"})}),"\n",(0,d.jsx)(n.h3,{id:"available-components",children:"Available Components"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Component"}),(0,d.jsx)(n.th,{children:"Description"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"Button"})}),(0,d.jsx)(n.td,{children:"Standard button with variant support"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"Card"})}),(0,d.jsx)(n.td,{children:"Container card"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"CardHeader"})}),(0,d.jsx)(n.td,{children:"Card header section"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"CardTitle"})}),(0,d.jsx)(n.td,{children:"Card title text"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"CardContent"})}),(0,d.jsx)(n.td,{children:"Card body content"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"CardDescription"})}),(0,d.jsx)(n.td,{children:"Card description text"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"Switch"})}),(0,d.jsx)(n.td,{children:"Toggle switch"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"Slider"})}),(0,d.jsx)(n.td,{children:"Range slider"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"Label"})}),(0,d.jsx)(n.td,{children:"Form label"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"Input"})}),(0,d.jsx)(n.td,{children:"Text input"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"Badge"})}),(0,d.jsx)(n.td,{children:"Status badge"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"Progress"})}),(0,d.jsx)(n.td,{children:"Progress bar"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"Tooltip"})}),(0,d.jsx)(n.td,{children:"Tooltip wrapper"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"TooltipProvider"})}),(0,d.jsx)(n.td,{children:"Tooltip context provider"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"TooltipTrigger"})}),(0,d.jsx)(n.td,{children:"Tooltip trigger element"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"TooltipContent"})}),(0,d.jsx)(n.td,{children:"Tooltip content popup"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"SubwayButton"})}),(0,d.jsx)(n.td,{children:"Game-styled button"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"MainMenuButton"})}),(0,d.jsx)(n.td,{children:"Main menu style button"})]})]})]}),"\n",(0,d.jsx)(n.h3,{id:"button-example",children:"Button Example"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-tsx",children:'const { Button } = api.utils.components as Record<string, React.ComponentType<any>>;\n\nfunction MyPanel() {\n  return (\n    <div className="flex flex-col gap-2">\n      <Button onClick={() => console.log(\'click\')}>Default</Button>\n      <Button variant="secondary">Secondary</Button>\n      <Button variant="destructive">Delete</Button>\n      <Button variant="outline">Outline</Button>\n      <Button variant="ghost">Ghost</Button>\n    </div>\n  );\n}\n'})}),"\n",(0,d.jsx)(n.h3,{id:"card-example",children:"Card Example"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-tsx",children:"const { Card, CardHeader, CardTitle, CardContent } = api.utils.components as Record<\n  string,\n  React.ComponentType<any>\n>;\n\nfunction StatsCard() {\n  const stats = api.gameState.getRidershipStats();\n\n  return (\n    <Card>\n      <CardHeader>\n        <CardTitle>Ridership</CardTitle>\n      </CardHeader>\n      <CardContent>\n        <p>{stats.totalRidersPerHour} riders/hour</p>\n        <p>{stats.totalRiders} total</p>\n      </CardContent>\n    </Card>\n  );\n}\n"})}),"\n",(0,d.jsx)(n.h2,{id:"using-lucide-icons",children:"Using Lucide Icons"}),"\n",(0,d.jsxs)(n.p,{children:["The game provides ~5000 ",(0,d.jsx)(n.a,{href:"https://lucide.dev/",children:"Lucide"})," icons. Access them by PascalCase name:"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-tsx",children:'const icons = api.utils.icons;\n\nfunction MyPanel() {\n  const TrainIcon = icons.Train;\n  const SettingsIcon = icons.Settings;\n  const MapPinIcon = icons.MapPin;\n\n  return (\n    <div className="flex items-center gap-2">\n      <TrainIcon className="w-4 h-4" />\n      <span>Trains</span>\n    </div>\n  );\n}\n'})}),"\n",(0,d.jsxs)(n.p,{children:["Common icons you might use: ",(0,d.jsx)(n.code,{children:"Train"}),", ",(0,d.jsx)(n.code,{children:"MapPin"}),", ",(0,d.jsx)(n.code,{children:"Settings"}),", ",(0,d.jsx)(n.code,{children:"DollarSign"}),", ",(0,d.jsx)(n.code,{children:"BarChart"}),", ",(0,d.jsx)(n.code,{children:"Route"}),",\n",(0,d.jsx)(n.code,{children:"Building"}),", ",(0,d.jsx)(n.code,{children:"Layers"}),", ",(0,d.jsx)(n.code,{children:"Clock"}),", ",(0,d.jsx)(n.code,{children:"Play"}),", ",(0,d.jsx)(n.code,{children:"Pause"}),", ",(0,d.jsx)(n.code,{children:"Zap"}),", ",(0,d.jsx)(n.code,{children:"Plus"}),", ",(0,d.jsx)(n.code,{children:"Minus"}),", ",(0,d.jsx)(n.code,{children:"Search"}),", ",(0,d.jsx)(n.code,{children:"Filter"}),",\n",(0,d.jsx)(n.code,{children:"Download"}),", ",(0,d.jsx)(n.code,{children:"Save"}),"."]}),"\n",(0,d.jsxs)(n.p,{children:["For icon names used in ",(0,d.jsx)(n.code,{children:"addFloatingPanel"}),", ",(0,d.jsx)(n.code,{children:"addToolbarButton"}),", etc., use the PascalCase string name\ndirectly:"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-ts",children:"api.ui.addFloatingPanel({\n  id: 'my-panel',\n  icon: 'Train', // String name, not the component\n  title: 'My Panel',\n  render: MyPanel,\n});\n"})}),"\n",(0,d.jsx)(n.h2,{id:"using-recharts",children:"Using Recharts"}),"\n",(0,d.jsxs)(n.p,{children:["The game bundles ",(0,d.jsx)(n.a,{href:"https://recharts.org/",children:"Recharts"})," for data visualization. All the standard\ncomponents are available:"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-tsx",children:'const { ResponsiveContainer, BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip } =\n  api.utils.charts;\n\nfunction RidershipChart() {\n  const metrics = api.gameState.getLineMetrics();\n\n  const data = metrics.map((m) => ({\n    name: m.name,\n    riders: m.ridersPerHour,\n  }));\n\n  return (\n    <ResponsiveContainer width="100%" height={200}>\n      <BarChart data={data}>\n        <CartesianGrid strokeDasharray="3 3" />\n        <XAxis dataKey="name" />\n        <YAxis />\n        <Tooltip />\n        <Bar dataKey="riders" fill="#3b82f6" />\n      </BarChart>\n    </ResponsiveContainer>\n  );\n}\n'})}),"\n",(0,d.jsx)(n.h3,{id:"available-chart-components",children:"Available Chart Components"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Component"}),(0,d.jsx)(n.th,{children:"Use for"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"ResponsiveContainer"})}),(0,d.jsx)(n.td,{children:"Auto-sizing wrapper (use this around every chart)"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsxs)(n.td,{children:[(0,d.jsx)(n.code,{children:"BarChart"}),", ",(0,d.jsx)(n.code,{children:"Bar"})]}),(0,d.jsx)(n.td,{children:"Bar charts"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsxs)(n.td,{children:[(0,d.jsx)(n.code,{children:"LineChart"}),", ",(0,d.jsx)(n.code,{children:"Line"})]}),(0,d.jsx)(n.td,{children:"Line charts"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsxs)(n.td,{children:[(0,d.jsx)(n.code,{children:"AreaChart"}),", ",(0,d.jsx)(n.code,{children:"Area"})]}),(0,d.jsx)(n.td,{children:"Area charts"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsxs)(n.td,{children:[(0,d.jsx)(n.code,{children:"PieChart"}),", ",(0,d.jsx)(n.code,{children:"Pie"}),", ",(0,d.jsx)(n.code,{children:"Cell"})]}),(0,d.jsx)(n.td,{children:"Pie/donut charts"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsxs)(n.td,{children:[(0,d.jsx)(n.code,{children:"RadarChart"}),", ",(0,d.jsx)(n.code,{children:"Radar"})]}),(0,d.jsx)(n.td,{children:"Radar charts"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"ComposedChart"})}),(0,d.jsx)(n.td,{children:"Mixed chart types"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsxs)(n.td,{children:[(0,d.jsx)(n.code,{children:"XAxis"}),", ",(0,d.jsx)(n.code,{children:"YAxis"})]}),(0,d.jsx)(n.td,{children:"Axes"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"CartesianGrid"})}),(0,d.jsx)(n.td,{children:"Grid lines"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"Tooltip"})}),(0,d.jsx)(n.td,{children:"Hover tooltips"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"Legend"})}),(0,d.jsx)(n.td,{children:"Chart legend"})]})]})]}),"\n",(0,d.jsx)(n.h2,{id:"styling-with-tailwind",children:"Styling With Tailwind"}),"\n",(0,d.jsx)(n.p,{children:"The game uses Tailwind CSS. You can use Tailwind utility classes directly in your components:"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-tsx",children:'function MyPanel() {\n  return (\n    <div className="flex flex-col gap-3 p-3">\n      <h3 className="text-lg font-semibold">My Mod</h3>\n      <p className="text-sm text-muted-foreground">Some description</p>\n      <div className="grid grid-cols-2 gap-2">\n        <div className="bg-card rounded-lg p-2">Cell 1</div>\n        <div className="bg-card rounded-lg p-2">Cell 2</div>\n      </div>\n    </div>\n  );\n}\n'})}),"\n",(0,d.jsx)(n.p,{children:"Useful theme-aware classes:"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"text-muted-foreground"})," \u2014 subdued text color"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"bg-card"})," \u2014 card background"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"border"})," \u2014 themed border"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"rounded-lg"})," / ",(0,d.jsx)(n.code,{children:"rounded-md"})," \u2014 border radius"]}),"\n"]}),"\n",(0,d.jsx)(n.h2,{id:"floating-panel-tips",children:"Floating Panel Tips"}),"\n",(0,d.jsxs)(n.p,{children:["When rendering into a floating panel (",(0,d.jsx)(n.code,{children:"addFloatingPanel"}),"), the panel provides its own container \u2014\nyou don't need to wrap your component in a ",(0,d.jsx)(n.code,{children:"Card"}),":"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-tsx",children:"// Good \u2014 panel provides the container\nfunction MyPanel() {\n  return (\n    <div className=\"flex flex-col gap-3 p-3\">\n      <p>Content here</p>\n    </div>\n  );\n}\n\n// Registering it\napi.ui.addFloatingPanel({\n  id: 'my-panel',\n  title: 'My Mod',\n  icon: 'Puzzle',\n  render: MyPanel,\n});\n"})}),"\n",(0,d.jsx)(n.h2,{id:"registering-custom-components-at-placements",children:"Registering Custom Components at Placements"}),"\n",(0,d.jsx)(n.p,{children:"For more advanced UI, you can register a React component directly at a UI placement:"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-tsx",children:"function MySettingsSection() {\n  const [enabled, setEnabled] = useState(true);\n\n  return (\n    <div className=\"flex items-center justify-between p-2\">\n      <span>My Feature</span>\n      <Switch checked={enabled} onCheckedChange={setEnabled} />\n    </div>\n  );\n}\n\napi.ui.registerComponent('settings-menu', {\n  id: 'my-settings',\n  component: MySettingsSection,\n});\n"})})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,d.jsx)(n,{...e,children:(0,d.jsx)(o,{...e})}):o(e)}},1753(e,n,t){t.d(n,{R:()=>r,x:()=>c});var s=t(758);const d={},i=s.createContext(d);function r(e){const n=s.useContext(i);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(d):e.components||d:r(e.components),s.createElement(i.Provider,{value:n},e.children)}}}]);