---
id: legacy-map-installation-guide
title: Installationsanleitung für Karten (Legacy)
---

Bevor der Map Manager entwickelt wurde, wurde die Methode `serve` verwendet. Sie war komplexer und unterschied sich von Karte zu Karte, aber wir können die benötigten Dateien leicht extrahieren und die Karte in den Map Manager portieren.

### Schritt 1 - Installation des Map Managers
Lade die neueste Version des Map Managers unter https://github.com/Kronifer/subwaybuilder-patcher/releases herunter. Klicke zum Herunterladen auf die Version, die deinem Betriebssystem entspricht.

<img width="1000" alt="image" src="https://github.com/user-attachments/assets/4bc7b27d-9868-475f-9a4a-5ce447a77036" />

:::note
Für Windows benötigst du die `.exe`-Datei. Für Linux die `.zip`-Datei. Für MacOS verwende die Datei `arm64.dmg`, wenn dein Mac einen Apple Silicon Chip (z. B. M1, M2, M3 usw.) besitzt, und die Datei `x64.dmg`, wenn dein Mac einen Intel-Chip hat. Als Faustregel gilt: Macs ab etwa 2021 besitzen meist Apple Silicon Chips, ältere Modelle meist Intel-Chips – überprüfe dies jedoch, da es Ausnahmen gibt.
:::

:::note
Unter MacOS wird der `.dmg`-Installer wahrscheinlich unter Quarantäne gestellt. Um ihn auszuführen, öffne ein Terminal im Ordner, in den du die Datei heruntergeladen hast, und führe `xattr -d com.apple.quarantine {INSTALLER_FILENAME}` aus. Wenn du beispielsweise Version 0.2.7 für einen ARM-Mac heruntergeladen hast, führe `xattr -d com.apple.quarantine Subway.Builder.Map.Manager-0.2.7-arm64.dmg` aus.
:::

Installiere die App anschließend wie jede andere Anwendung. Sobald die Installation abgeschlossen ist, starte die App und durchlaufe den Einrichtungsprozess. Danach kannst du die ZIP-Datei, den Installer und alle weiteren heruntergeladenen Dateien löschen.

### Schritt 2 - Dateien extrahieren
Nun müssen wir die benötigten Dateien aus der heruntergeladenen Karte extrahieren. Insgesamt benötigen wir 6 Dateien:
 - `XXX.pmtiles` (`XXX` ist dein Stadtcode; z. B. `MIA` für Miami)
 - `demand_data.json`
 - `buildings_index.json`
 - `roads.geojson`
 - `runways_taxiways.geojson`
 - `config.json`

Die erste Datei ist einfach zu finden. Suche in der heruntergeladenen Karte nach der Datei XXX.pmtiles. Sie befindet sich irgendwo im Verzeichnis, entweder im Hauptordner oder in einem Unterordner. Erstelle zunächst einen temporären Arbeitsordner für unsere 6 Dateien.

Die nächsten 4 Dateien erfordern etwas mehr Aufwand. Du solltest sie relativ leicht finden, allerdings liegen sie komprimiert vor (sie enden auf `.gz`). Diese müssen wir als Archiv entpacken.

:::tip
Unter Windows und Linux kannst du [7-Zip](https://www.7-zip.org/download.html) verwenden, um das `.gz`-Archiv zu entpacken. MacOS unterstützt das Entpacken von gzip-Archiven nativ – du kannst einfach darauf klicken.
:::

Im Archiv sollte sich jeweils eine einzelne Datei befinden. Im Archiv `demand_data.json.gz` findest du beispielsweise `demand_data.json`, und dasselbe gilt für die anderen 3 Archive. Extrahiere alle 4 Dateien und lege sie in deinen temporären Arbeitsordner. Manche Karten enthalten doppelte Datendateien im Verzeichnis. Es spielt keine Rolle, welche du auswählst – sie sind identisch.

Die letzte benötigte Datei ist `config.json`. Diese ist am schwierigsten. Erstelle zunächst eine neue Datei mit dem Namen `config.json`.

:::tip
Stelle sicher, dass es sich um eine `.json`-Datei handelt. Falls die Dateiendung nicht als `JSON File` angezeigt wird, suche online, wie du Dateiendungen in deinem Betriebssystem anzeigen lassen kannst.
:::

Füge in `config.json` folgende Vorlage ein:
```
{
  "name": "Boise",
  "code": "BOI",
  "description": "Build a rapid transit network for one of America`s fastest growing cities.",
  "population": 329866,
  "initialViewState": {
    "zoom": 13,
    "latitude": 43.617499,
    "longitude": -116.245394,
    "bearing": 0
  },
  "creator": "muffintime",
  "version": "2.1.0"
}
```


Diese Daten müssen wir an unsere Karte anpassen. Im Verzeichnis deiner Karte sollte sich eine `.js`-Datei befinden, meist `index.js`. In dieser Datei findest du etwas, das unserer Vorlage sehr ähnlich sieht.

<img width="1097" height="402" alt="image" src="https://github.com/user-attachments/assets/b25a1577-badf-4adf-a414-d76003c3a26d" />

> Dies befindet sich in der Datei `index.js` des Canadian Cities Map Pack.

:::tip
Falls dein Verzeichnis mehrere `.js`-Dateien enthält, überprüfe alle. Eine davon enthält die benötigten Daten.
:::

Aus dieser Datei erhalten wir:
 - `name`
 - `code`
 - `description`
 - `population`
 - `initialViewState` (und alle dazugehörigen Werte)

:::note
Falls deine Daten kein `initialViewState` enthalten, kannst du 12 oder 13 für `zoom` und 0 für `bearing` verwenden. Für `latitude` und `longitude` kannst du eine beliebige Zahl innerhalb deines bbox-Koordinatenbereichs wählen (`latitude` entspricht der **2.** und **4.** Zahl, `longitude` der **1.** und **3.**). Im oben gezeigten Toronto-Beispiel könnten wir 44.0 und -79.0 für `latitude` bzw. `longitude` verwenden.
:::

Die letzten beiden benötigten Werte, `creator` und `version`, findest du in `manifest.json`, das jedes Projekt enthält. Sobald du alle Informationen für deine config.json gesammelt hast, stelle sicher, dass du alle 6 Dateien besitzt. Danach kannst du mit dem nächsten Schritt fortfahren.

:::important
Auch wenn es nicht zwingend erforderlich ist: Wenn du diese portierte Karte teilen möchtest, gib bitte den `creator` an. So erhalten die ursprünglichen Ersteller die verdiente Anerkennung für ihre Karten.
:::

### Schritt 3 - Dateien zippen
Nun, da wir alle 6 Dateien haben, müssen wir sie in eine `.zip`-Datei packen. Das geht unter Windows oder Linux nativ oder mit [7-Zip](https://www.7-zip.org/download.html), unter MacOS mit `Komprimieren`. Sobald du die `.zip`-Datei erstellt hast, ist das Portieren der Mod praktisch abgeschlossen – du musst sie nur noch ins Spiel importieren.

### Schritt 4 - Karte hinzufügen

Um eine Karte zu installieren, klicke einfach auf die Schaltfläche `ADD A MAP` und importiere die ZIP-Datei mit deiner Karte. Danach sollten Kartenname, Ersteller und Version auf dem Bildschirm angezeigt werden.

<img width="1200" alt="image" src="https://github.com/user-attachments/assets/c258cf39-c211-4677-8ac1-0828a97d5c61" />

Sobald du alle gewünschten Karten importiert hast, klicke auf `GENERATE MOD`. Dadurch werden die Karten automatisch zu Subway Builder hinzugefügt und der Map Manager als Mod im Spiel registriert.\

Wenn du nach dem Generieren der Mod eine weitere Karte hinzufügen möchtest, starte den Map Manager erneut und importiere alle Karten, die im Spiel vorhanden sein sollen (auch die bereits hinzugefügten). Klicke auf `GENERATE MOD` und der Map Manager fügt die Karten automatisch hinzu. Wenn du die alten Karten nicht erneut hinzufügst, werden sie aus dem Spiel entfernt.

### Schritt 5 - Subway Builder starten

Nachdem du alle Karten hinzugefügt und die Mod generiert hast, kannst du das Spiel mit `START GAME` starten. So wirst du das Spiel künftig starten. Im Spiel erscheinen deine Karten im Reiter `CUSTOM` und sind spielbereit!

:::important
Aufgrund der aktuellen Funktionsweise des Spiels musst du das Spiel jedes Mal über den Map Manager starten, wenn du eine benutzerdefinierte Karte spielen möchtest. Wenn du das Spiel nicht über den Map Manager startest, werden Gebäude und Wasser im Spiel nicht angezeigt.
:::
